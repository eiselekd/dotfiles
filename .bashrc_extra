#if [ -f ${HOME}/git/dotfiles/.bashrc_extra ]; then
#    . ${HOME}/git/dotfiles/.bashrc_extra
#fi

alias ovc='openssl x509 -text -noout -in ' 
alias ovk='openssl rsa -text -noout -in ' 

# Avoid duplicates
export HISTCONTROL=ignoredups:erasedups
# When the shell exits, append to the history file instead of overwriting it
shopt -s histappend

# After each command, append to the history file and reread it
# export PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND$'\n'}history -a; history -c; history -r"
# add /etc/rsyslog.d/bash.conf:
# local6.*    /var/log/commands.log
# export PROMPT_COMMAND='RETRN_VAL=$?;logger -p local6.debug "$(whoami) [$$]: $(history 1 | sed "s/^[ ]*[0-9]\+[ ]*//" ) [$RETRN_VAL]"'


export LOGDIR=${HOME}/logs

alias em="emacs -nw"

function record () {
   d=`date +"%Y-%m-%d-%H-%M-%S"`
   if [ ! -d ${LOGDIR} ]; then mkdir -p ${LOGDIR}; fi
   touch ${LOGDIR}/${d}
   script  -a ${LOGDIR}/${d}
   history > ${LOGDIR}/${d}.history


   exec 1> >(logger -s -t $(basename $0)) 2>&1
}

# enable this to log to journalctl -f
# exec 1> >(logger -s -t $(basename $0)) 2>&1
# exec > >(logger -p user.info) 2> >(logger -p user.warn)


alias ovc="openssl x509 -noout -text -in "
alias ovk="openssl rsa  -noout -text -in "

alias sshp='ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no '
alias scpp='scp -o PreferredAuthentications=password -o PubkeyAuthentication=no '
alias xshare='x11vnc -display :0 -auth .Xauthority'

nsidof()
{
    nsid=$(ps faux | grep -A 1 "lxc $1" | grep -v grep | grep "init" | awk '{print $2}')
    echo $nsid
}

xset b off
